# 日志处理

## glog库使用指南

Google Glog,是一个C++语言的应用级日志记录框架，提供了C++风格的流操作和各种助手宏。

### 使用入门

使用日志文件时，一般会有以下几个最基本的要求，第一要支持不同级别的日志输出，同时可以指定日志输出的目录；第二对日志的输出格式要规范，便于阅读分析和Ｄebug。

glog提供的日志级别有INFO, WARNING, ERROR, FATAL，分别对应数字 0, 1, 2, 3对应级别的日志打印在对应级别的日志文件中。并且高级别的日志同时打印在本级别和低级别中。例如 INFO中会有WARNING级别的输出。

日志文件默认输出在“/tmp/”目录下，可以在程序中设置，FLAGS_log_dir值修改。日志文件名称格式：<program name>.<hostname>.<user name>.log.<severity level>.<date>.<time>.<pid>
例如：hello_world.example.com.name.log.INFO.20141225-222411.10474

glog中的常用参数说明：
```
FLAGS_log_dir          日志输出目录
FLAGS_v                自定义VLOG(m)时，m值小于此处设置值的语句才有输出
FLAGS_max_log_size     每个日志文件最大大小（MB级别）
FLAGS_minloglevel      输出日志的最小级别，即高于等于该级别的日志都将输出。
```

基本函数:
```
LOG_IF(INFO, num_cookies > 10) << "Got lots of cookies";
```

### 示例说明
首先安装对应的开发库，以ubuntu14.04为例
```
sudo apt-get install libgoogle-glog-dev 
```

main

```
#include <iostream>
#include <cmath>

#include <glog/logging.h>

#include "demo_config.h"

#include "./option/option.h"

using namespace std;

int main(int argc, char *argv[]) {

    mainOption(argc, argv);
    google::ParseCommandLineFlags (&argc, &argv, true);
    google::InitGoogleLogging(argv[0]);  
  
    //日志输出目录，可以从命令行传入　--log_dir=./log
    FLAGS_log_dir = "./log";  
  
 
    Log(INFO) << argv[0] << " Version is " <<   HELLOWORLD_VERSION_MAJOR << "." << 
            HELLOWORLD_VERSION_MINOR << endl; 
    LOG(INFO) << FLAGS_port << endl;
    
    google::ShutdownGoogleLogging();
    google::ShutDownCommandLineFlags();
    return 0;
}
```
编译执行，链接库中添加glog库
```
target_link_libraries (${PROJECT_NAME} glog)
```
